






















































<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S22MARKET - Ù†Ø§ÙØ°Ø© ØªØ±Ø­ÙŠØ¨ ÙˆØ£Ø°ÙƒØ§Ø±</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Scheherazade+New:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Amiri+Quran&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

    <style>
        /* =================================================================== */
        /* S22MARKET - Ù†Ø³Ø®Ø© Ù…Ø·ÙˆØ±Ø© ÙˆÙ…Ù†Ù‚Ø­Ø© (Ù…Ù†Ø·Ù‚ ÙƒÙ„ Ø³Ø§Ø¹ØªÙŠÙ† + ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ù‡Ø§ØªÙ)   */
        /* =================================================================== */

        :root {
            --adm-bg-color: #f0f4f8;
            --adm-modal-bg: #ffffff;
            --adm-primary-text: #1c3d5a;
            --adm-secondary-text: #5a7b9d;
            --adm-reminder-text: #607d8b;
            --adm-primary-accent: #007bff;
            --adm-primary-accent-hover: #0056b3;
            --adm-success-color: #28a745;
            --adm-subtle-border: rgba(0, 123, 255, 0.15);
            
            --adm-border-radius-lg: 20px;
            --adm-border-radius-md: 14px;
            
            --adm-shadow: 0 15px 45px rgba(0, 123, 255, 0.18);
            --adm-transition: all 0.3s ease-in-out;
        }

        *, *::before, *::after { box-sizing: border-box; }

        body {
            font-family: 'Scheherazade New', serif;
            font-weight: 500;
            margin: 0;
            background-color: var(--adm-bg-color);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .adm-modal-overlay {
            display: flex;
            justify-content: center;
            align-items: center;
            position: fixed;
            inset: 0;
            z-index: 99999;
            padding: 1rem;
            background-color: rgba(10, 30, 50, 0.6);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            overflow-y: auto;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease, visibility 0.5s;
        }

        .adm-modal-overlay.is-visible {
            opacity: 1;
            visibility: visible;
        }
        
        .adm-modal-content, .adm-jumaa-message-content, .isn-modal-content {
            background: var(--adm-modal-bg);
            padding: clamp(1.2rem, 5vw, 2.2rem);
            border-radius: var(--adm-border-radius-lg);
            box-shadow: var(--adm-shadow);
            width: 100%;
            max-width: 500px;
            text-align: center;
            border-top: 6px solid var(--adm-primary-accent);
            transform: translateY(25px) scale(0.97);
            opacity: 0;
            transition: transform 0.4s ease-out, opacity 0.4s ease-out;
            display: flex;
            flex-direction: column;
            gap: clamp(1rem, 4vw, 1.5rem);
        }

        .is-visible .adm-modal-content,
        .is-visible .adm-jumaa-message-content,
        .is-visible .isn-modal-content {
            transform: translateY(0) scale(1);
            opacity: 1;
            transition-delay: 0.1s;
        }
        
        .adm-hidden { display: none !important; }
        
        .adm-modal-header h2 {
            font-size: clamp(1.8rem, 6vw, 2.5rem);
            font-weight: 700;
            color: var(--adm-primary-text);
            margin: 0;
            line-height: 1.4;
        }
        
        .adm-tasks-header {
            font-size: clamp(1.1rem, 4vw, 1.3rem);
            line-height: 1.8;
            color: var(--adm-secondary-text);
            margin: 0.25rem 0 0 0;
        }

        .adm-dhikr-btn {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: clamp(0.8rem, 3.5vw, 1rem) clamp(1rem, 4.5vw, 1.3rem);
            font-size: clamp(1.2rem, 5vw, 1.4rem);
            font-weight: 700;
            font-family: 'Scheherazade New', serif;
            color: #fff;
            background: linear-gradient(45deg, var(--adm-primary-accent), #4dabf7);
            border: none;
            border-bottom: 3px solid var(--adm-primary-accent-hover);
            border-radius: var(--adm-border-radius-md);
            cursor: pointer;
            transition: var(--adm-transition);
            text-decoration: none;
        }
        
        .adm-dhikr-btn .adm-icon { margin-left: 15px; font-size: 1.3em; }
        .adm-dhikr-btn .adm-btn-text { flex-grow: 1; text-align: right; }

        .adm-dhikr-btn:hover:not(:disabled) {
            transform: translateY(-4px);
            border-bottom-width: 5px;
        }
        .adm-dhikr-btn:active:not(:disabled) {
            transform: translateY(-1px);
            border-bottom-width: 3px;
        }

        .adm-dhikr-btn:disabled {
            background: var(--adm-success-color);
            cursor: default;
            border-bottom-color: #1e7e34;
        }

        .adm-dhikr-btn .adm-counter {
            background-color: rgba(255, 255, 255, 0.2);
            padding: 0.2rem 0.8rem;
            border-radius: 50px;
            font-size: 0.9rem;
        }
        
        .adm-modal-footer {
            margin-top: auto;
            padding-top: clamp(0.8rem, 3vw, 1.2rem);
            border-top: 1px solid var(--adm-subtle-border);
        }
        
        .adm-dhikr-reminder .quran-verse {
            color: var(--adm-primary-text);
            font-weight: 700;
            font-family: 'Amiri Quran', serif;
            font-size: clamp(1.1rem, 4vw, 1.3rem);
            line-height: 2;
        }

        .adm-progress-bar-container {
            background-color: rgba(0, 123, 255, 0.1);
            border-radius: 50px;
            height: 10px;
            overflow: hidden;
        }
        #adm-progress-bar {
            width: 0%;
            height: 100%;
            background: var(--adm-success-color);
            border-radius: 50px;
            transition: width 0.6s ease-in-out;
        }
        
        .adm-jumaa-message-content {
            border-top-color: var(--adm-primary-accent-hover);
        }
        .adm-jumaa-message-content .closing-message {
            background-color: #d1ecf1;
            border: 1px solid #bee5eb;
            padding: clamp(0.8rem, 3.5vw, 1.1rem);
            border-radius: var(--adm-border-radius-md);
        }
        .adm-jumaa-message-content .closing-message p {
            color: #0c5460;
            font-weight: 700;
            margin: 0;
            font-size: clamp(1rem, 3.5vw, 1.1rem);
        }
        .isn-modal-content .quran-text {
            font-size: clamp(1.3rem, 4.5vw, 1.6rem);
            line-height: 1.8;
        }
        .isn-btn {
            font-family: 'Scheherazade New', serif;
            font-size: 1.2rem;
            padding: 0.8rem;
            border-radius: var(--adm-border-radius-md);
        }
    </style>
</head>
<body>

    <div id="adm-modal-overlay" class="adm-modal-overlay">
        
        <div id="adm-modal-content" class="adm-modal-content adm-hidden">
            <div class="adm-modal-header">
                <h2>Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ Ù…ØªØ¬Ø±ÙƒÙ…</h2>
                <p class="adm-tasks-header">Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŒ Ù†Ø±Ø¬Ùˆ Ø¥Ù†Ø¬Ø§Ø² Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø°ÙƒØ§Ø± Ø§Ù„ÙŠØ³ÙŠØ±Ø©.</p>
            </div>
            <div id="adm-dhikr-tasks" class="adm-dhikr-tasks" style="display: flex; flex-direction: column; gap: 1rem;">
                <button id="adm-btn-salat" class="adm-dhikr-btn">
                    <span class="adm-btn-text"><i class="fa-solid fa-moon adm-icon"></i>ØµÙ„ÙÙ‘ Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø¨ÙŠ ï·º</span>
                    <span class="adm-counter">0/1</span>
                </button>
                <button id="adm-btn-tasbih" class="adm-dhikr-btn">
                    <span class="adm-btn-text"><i class="fa-solid fa-leaf adm-icon"></i>Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ ÙˆØ¨Ø­Ù…Ø¯Ù‡</span>
                    <span class="adm-counter">0/1</span>
                </button>
                <button id="adm-btn-istighfar" class="adm-dhikr-btn">
                    <span class="adm-btn-text"><i class="fa-solid fa-hands-praying adm-icon"></i>Ø§Ø³ØªØºÙØ± Ø§Ù„Ù„Ù‡</span>
                    <span class="adm-counter">0/1</span>
                </button>
            </div>
            <div class="adm-modal-footer">
                <div class="adm-dhikr-reminder">
                    <p class="quran-verse">ï´¿ Ø£ÙÙ„ÙØ§ Ø¨ÙØ°ÙÙƒÙ’Ø±Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù ØªÙØ·Ù’Ù…ÙØ¦ÙÙ†ÙÙ‘ Ø§Ù„Ù’Ù‚ÙÙ„ÙÙˆØ¨Ù ï´¾</p>
                </div>
                <div class="adm-progress-bar-container">
                    <div id="adm-progress-bar"></div>
                </div>
            </div>
        </div>

        <div id="adm-jumaa-message" class="adm-jumaa-message-content adm-hidden">
            <h2 class="jumaa-header">ğŸ“¿ ØªØ°ÙƒÙŠØ± Ø¨ØµÙ„Ø§Ø© Ø§Ù„Ø¬Ù…Ø¹Ø©</h2>
            <div class="jumaa-body" style="font-family: 'Amiri Quran', serif; font-size: 1.5rem; line-height: 2.2;">
                <p>ÙŠÙÙ°Ù“Ø£ÙÙŠÙÙ‘Ù‡ÙØ§ Ù±Ù„ÙÙ‘Ø°ÙÙŠÙ†Ù Ø¡ÙØ§Ù…ÙÙ†ÙÙˆÙ“Ø§Ù’ Ø¥ÙØ°ÙØ§ Ù†ÙÙˆØ¯ÙÙŠÙ Ù„ÙÙ„ØµÙÙ‘Ù„ÙÙˆÙ°Ø©Ù Ù…ÙÙ† ÙŠÙÙˆÛ¡Ù…Ù Ù±Ù„Û¡Ø¬ÙÙ…ÙØ¹ÙØ©Ù ÙÙÙ±Ø³Û¡Ø¹ÙÙˆÛ¡Ø§Ù’ Ø¥ÙÙ„ÙÙ‰Ù° Ø°ÙÙƒÛ¡Ø±Ù Ù±Ù„Ù„ÙÙ‘Ù‡Ù ÙˆÙØ°ÙØ±ÙÙˆØ§Ù’ Ù±Ù„Û¡Ø¨ÙÙŠÛ¡Ø¹ÙÛš</p>
            </div>
            <p class="jumaa-source">[Ø³ÙˆØ±Ø© Ø§Ù„Ø¬Ù…Ø¹Ø©: 9]</p>
            <button id="play-jumaa-audio" class="adm-dhikr-btn">
                <span class="adm-btn-text"><i class="fa-solid fa-volume-high adm-icon"></i> ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙ„Ø§ÙˆØ©</span>
            </button>
            <div class="closing-message">
                <p>â›” ÙŠØºÙ„Ù‚ Ù…ØªØ¬Ø± <strong>S22MARKET</strong> Ø£Ø¨ÙˆØ§Ø¨Ù‡ ÙŠÙˆÙ… Ø§Ù„Ø¬Ù…Ø¹Ø© Ù…Ù† <strong>11:30</strong> Ø¥Ù„Ù‰ <strong>14:00</strong>.</p>
            </div>
            <button class="adm-jumaa-refresh-btn isn-btn" aria-label="ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø©" onclick="location.reload();">
                <span>Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ø³Ø§Ø¹Ø© 14:00</span>
            </button>
        </div>

        <div id="kahfModal" class="isn-modal-content jumaa-style adm-hidden">
            <div class="isn-modal-header"><h2>ğŸ“¿ ÙØ¶Ù„ Ø³ÙˆØ±Ø© Ø§Ù„ÙƒÙ‡Ù</h2></div>
            <p class="quran-text">"Ù…Ù† Ù‚Ø±Ø£ Ø³ÙˆØ±Ø©Ù Ø§Ù„ÙƒÙ‡ÙÙ ÙÙŠ ÙŠÙˆÙ…Ù Ø§Ù„Ø¬Ù…Ø¹Ø©Ù Ø£Ø¶Ø§Ø¡ Ù„Ù‡ Ù…Ù† Ø§Ù„Ù†ÙˆØ±Ù Ù…Ø§ Ø¨ÙŠÙ† Ø§Ù„Ø¬Ù…ÙØ¹ÙØªÙÙŠÙ†."</p>
            <p class="hadith-source">ØµØ­ÙŠØ­ Ø§Ù„ØªØ±ØºÙŠØ¨ | 736</p>
            <div class="buttons-container" style="display:flex; gap:1rem;">
                <a href="Ø³ÙˆØ±Ø© Ø§Ù„ÙƒÙ‡Ù Ù…ÙƒØªÙˆØ¨Ø©.html" class="isn-btn" style="flex:1; background-color: var(--adm-primary-accent); color:white; text-decoration:none;">Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø³ÙˆØ±Ø©</a>
                <button id="closeKahfModal" class="isn-btn" style="flex:1; background-color: #e9ecef; color:#495057; border:none; cursor:pointer;">Ø¥ØºÙ„Ø§Ù‚</button>
            </div>
        </div>
    </div>

    <audio id="jumaa-audio" src="JOMAA.mp3" preload="auto"></audio>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        try {
            const overlay = document.getElementById('adm-modal-overlay');
            const modals = {
                dhikr: document.getElementById('adm-modal-content'),
                jumaa: document.getElementById('adm-jumaa-message'),
                kahf: document.getElementById('kahfModal')
            };

            function handleWelcomeMessage() {
                const WELCOME_COOLDOWN = 6 * 60 * 60 * 1000; // 6 Ø³Ø§Ø¹Ø§Øª
                const lastShown = localStorage.getItem('welcomeMessageLastShown');
                const now = new Date().getTime();
                const header = modals.dhikr.querySelector('.adm-modal-header');

                if (header && (!lastShown || (now - lastShown > WELCOME_COOLDOWN))) {
                    const existingWelcomeEl = header.querySelector('.s22-welcome-msg');
                    if (existingWelcomeEl) return; 

                    const welcomeEl = document.createElement('p');
                    welcomeEl.className = 's22-welcome-msg';
                    welcomeEl.innerHTML = `ğŸŒŸ Ù…Ø±Ø­Ø¨Ø§ Ø¨ÙƒÙ… ÙÙŠ <strong>S22MARKET</strong>`;
                    welcomeEl.style.cssText = `
                        color: var(--adm-primary-accent-hover); font-weight: 700; margin-bottom: 1rem;
                        font-size: clamp(1.3rem, 5vw, 1.5rem); background-color: rgba(0, 123, 255, 0.08);
                        padding: 0.7rem; border-radius: var(--adm-border-radius-md);
                        border: 1px solid rgba(0, 123, 255, 0.1);`;
                    header.prepend(welcomeEl);
                    localStorage.setItem('welcomeMessageLastShown', now);
                }
            }
            
            // =========================================================================
            // [ØªØ¹Ø¯ÙŠÙ„ Ù„Ù„Ù…Ø±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©] Ù‡Ø°Ø§ Ù‡Ùˆ Ø§Ù„Ù…Ù†Ø·Ù‚ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ ÙˆØ§Ù„ØµØ­ÙŠØ­
            // =========================================================================
            function handleModalsVisibility() {
                const now = new Date();
                const day = now.getDay(); // 5 = Friday
                const isFriday = (day === 5);

                Object.values(modals).forEach(modal => modal.classList.add('adm-hidden'));
                
                let modalToShow = null;

                if (isFriday) {
                    const currentTimeInMinutes = now.getHours() * 60 + now.getMinutes();
                    const isJumaaClosingTime = currentTimeInMinutes >= 690 && currentTimeInMinutes < 840; // 11:30 to 14:00
                    
                    if (isJumaaClosingTime) {
                        modalToShow = modals.jumaa;
                    } else {
                        // [ØªØ­Ø³ÙŠÙ†] Ø§Ø³ØªØ®Ø¯Ø§Ù… sessionStorage Ù„Ù…Ù†Ø¹ Ø¸Ù‡ÙˆØ±Ù‡Ø§ Ø¹Ù†Ø¯ ÙƒÙ„ ØªØ­Ø¯ÙŠØ« ÙÙŠ Ù†ÙØ³ Ø§Ù„Ø¬Ù„Ø³Ø©
                        const kahfShownThisSession = sessionStorage.getItem('kahfModalShown');
                        if (!kahfShownThisSession) {
                           modalToShow = modals.kahf;
                           sessionStorage.setItem('kahfModalShown', 'true');
                        }
                    }
                } else {
                    // Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ ÙŠØ¹Ù…Ù„ ÙÙ‚Ø· ÙÙŠ Ø§Ù„Ø£ÙŠØ§Ù… ØºÙŠØ± Ø§Ù„Ø¬Ù…Ø¹Ø©
                    const DHIKR_COOLDOWN = 2 * 60 * 60 * 1000; // Ø³Ø§Ø¹ØªØ§Ù†
                    const lastCompleted = localStorage.getItem('dhikrLastCompleted');
                    if (!lastCompleted || (now.getTime() - lastCompleted > DHIKR_COOLDOWN)) {
                        modalToShow = modals.dhikr;
                        handleWelcomeMessage();
                    }
                }

                if (modalToShow) {
                    modalToShow.classList.remove('adm-hidden');
                    overlay.classList.add('is-visible');
                }
            }
            
            handleModalsVisibility();

            // --- Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø³ÙƒØ±Ø¨Øª Ù„Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙˆØ§Ù„ØµÙˆØª ÙˆØ§Ù„Ø£Ø°ÙƒØ§Ø± (Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ±) ---
            const jumaaAudio = document.getElementById('jumaa-audio');
            document.getElementById('play-jumaa-audio')?.addEventListener('click', (e) => {
                const btnText = e.currentTarget.querySelector('.adm-btn-text');
                if (jumaaAudio.paused) {
                    jumaaAudio.play();
                    btnText.innerHTML = '<i class="fa-solid fa-pause adm-icon"></i> Ø¬Ø§Ø±Ù Ø§Ù„ØªØ´ØºÙŠÙ„...';
                } else {
                    jumaaAudio.pause();
                    btnText.innerHTML = '<i class="fa-solid fa-volume-high adm-icon"></i> ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙ„Ø§ÙˆØ©';
                }
            });
            if(jumaaAudio) jumaaAudio.onended = () => {
                document.querySelector('#play-jumaa-audio .adm-btn-text').innerHTML = '<i class="fa-solid fa-volume-high adm-icon"></i> ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙ„Ø§ÙˆØ©';
            };
            
            document.getElementById('closeKahfModal')?.addEventListener('click', () => {
                overlay.classList.remove('is-visible');
            });

            const dhikrModule = (() => {
                const dhikrModal = modals.dhikr;
                if (!dhikrModal) return;

                const buttons = Array.from(dhikrModal.querySelectorAll('.adm-dhikr-btn'));
                if (buttons.length === 0) return;

                const progressBar = document.getElementById('adm-progress-bar');
                const totalClicksRequired = buttons.length;
                let completedClicks = 0;

                const updateProgressBar = () => {
                    if (progressBar) {
                        progressBar.style.width = `${(completedClicks / totalClicksRequired) * 100}%`;
                    }
                };

                const onTaskComplete = () => {
                    localStorage.setItem('dhikrLastCompleted', new Date().getTime());
                    const tasksContainer = document.getElementById('adm-dhikr-tasks');
                    if(tasksContainer) {
                       tasksContainer.innerHTML = `<p style="color: var(--adm-success-color); font-size: 1.5rem; font-weight: bold;">Ø¬Ø²Ø§ÙƒÙ… Ø§Ù„Ù„Ù‡ Ø®ÙŠØ±Ù‹Ø§!</p>`;
                    }
                    setTimeout(() => overlay.classList.remove('is-visible'), 2000);
                };

                buttons.forEach(btn => {
                    btn.addEventListener('click', () => {
                        if (btn.disabled) return;
                        
                        completedClicks++;
                        updateProgressBar();
                        btn.disabled = true;
                        
                        const textSpan = btn.querySelector('.adm-btn-text');
                        if (textSpan) {
                           textSpan.innerHTML = (textSpan.querySelector('.adm-icon')?.outerHTML || '') + 'Ø£ÙÙ†Ø¬ÙØ²';
                        }
                        const counterSpan = btn.querySelector('.adm-counter');
                        if (counterSpan) {
                            counterSpan.style.display = 'none';
                        }

                        if (completedClicks === totalClicksRequired) {
                            onTaskComplete();
                        }
                    }, { once: true });
                });
                updateProgressBar();
            })();

        } catch (error) {
            console.error("Script Error:", error);
            const overlay = document.getElementById('adm-modal-overlay');
            if (overlay) overlay.style.display = 'none';
        }
    });
    </script>

</body>
</html>